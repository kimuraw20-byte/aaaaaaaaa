<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ููุธูู ุงูุฏุฑุงุณุฉ</title>
  <link rel="stylesheet" href="style.css" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#7f4ca0">
</head>
<body>
  <div class="app" id="app">
    <!-- Topbar -->
    <header class="topbar">
      <div class="left">
        <button class="icon-btn" id="backBtn" title="ุฑุฌูุน" aria-label="ุฑุฌูุน">โต</button>
        <h1 class="title" id="pageTitle">ููุธูู ุงูุฏุฑุงุณุฉ</h1>
      </div>
      <div class="right">
        <button class="icon-btn" id="themeToggle" title="ุงููุถุน ุงูุฏุงูู/ุงููุงุชุญ" aria-label="ุงููุถุน ุงูุฏุงูู">๐</button>
      </div>
    </header>

    <!-- Home view -->
    <main class="view active" id="homeView">
      <h2 class="section-title">ููุงุฏู</h2>
      <div id="subjectsGrid" class="subjects"></div>
      <div class="tip">ุงุถุบุท ุนูู ุฃู ูุงุฏุฉ ููุฏุฎูู. ุฃุถู ูุงุฏุฉ ุฌุฏูุฏุฉ ุจุฒุฑ + ูู ุงูุฃุณูู.</div>
    </main>

    <!-- Subject view -->
    <main class="view" id="subjectView">
      <nav class="tabs" id="tabs">
        <button class="tab active" data-tab="notes">๐ <span>ููุงุญุธุงุช</span></button>
        <button class="tab" data-tab="files">๐ <span>ูููุงุช</span></button>
        <button class="tab" data-tab="images">๐ผ๏ธ <span>ุตูุฑ</span></button>
        <button class="tab" data-tab="audio">๐ต <span>ุตูุชูุงุช</span></button>
      </nav>

      <section id="tab-notes">
        <div class="empty" id="empty-notes"><span class="big">๐โ</span>ูุง ุชูุฌุฏ ููุงุญุธุงุช</div>
        <div class="notes" id="list-notes"></div>
      </section>

      <section id="tab-files" class="hide">
        <div class="empty" id="empty-files"><span class="big">๐</span>ูุง ุชูุฌุฏ ูููุงุช</div>
        <div class="items" id="list-files"></div>
      </section>

      <section id="tab-images" class="hide">
        <div class="empty" id="empty-images"><span class="big">๐ผ๏ธ</span>ูุง ุชูุฌุฏ ุตูุฑ</div>
        <div class="gallery" id="list-images"></div>
      </section>

      <section id="tab-audio" class="hide">
        <div class="empty" id="empty-audio"><span class="big">๐ต</span>ูุง ุชูุฌุฏ ูููุงุช ุตูุชูุฉ</div>
        <div class="items" id="list-audio"></div>
      </section>
    </main>

    <!-- Add FAB -->
    <button class="fab" id="fab" title="ุฅุถุงูุฉ">๏ผ</button>

    <!-- Dialog -->
    <dialog id="dialog">
      <form method="dialog">
        <div class="modal-head"><strong id="dlgTitle">ุฅุถุงูุฉ</strong></div>
        <div class="modal-body" id="dlgBody"></div>
        <div class="row modal-foot">
          <button class="btn ghost" value="cancel">ุฅูุบุงุก</button>
          <button class="btn primary" id="dlgSave" value="default">ุญูุธ</button>
        </div>
      </form>
    </dialog>

    <!-- Image Viewer -->
    <div id="imgViewer" class="viewer hide">
      <button id="viewerClose" class="viewer-btn close" aria-label="ุฅุบูุงู">โ</button>
      <button id="viewerPrev" class="viewer-btn prev" aria-label="ุงูุณุงุจู">โน</button>
      <img id="viewerImg" alt="ูุนุงููุฉ">
      <button id="viewerNext" class="viewer-btn next" aria-label="ุงูุชุงูู">โบ</button>
    </div>

    <!-- Toasts -->
    <div id="toasts" class="toasts"></div>
  </div>

  <script src="app.js"></script>

  <!-- Register Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js")
        .then(() => console.log("Service Worker ูุณุฌู โ๏ธ"))
        .catch(err => console.error("ูุดู ุงูุชุณุฌูู:", err));
    }
  </script>
</body>
</html>